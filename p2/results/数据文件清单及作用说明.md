# 共享单车调度优化问题二数据文件清单及作用说明

## 一、数据文件清单

| 文件路径 | 中文描述 |
|---------|---------|
| `/p1/results/dbscan_cluster_stats_new.csv` | 所有站点统计信息 |
| `/p1/results/dbscan_top30_clusters.csv` | 30个主要站点信息 |
| `/p1/results/top30_count.csv` | 30个主要站点24小时借还统计 |
| `/p1/results/station_demand_gap.csv` | 早高峰需求预测 |
| `/p1/data/processed_data.csv` | 清洗后的原始骑行数据 |

## 二、文件内容及作用说明

### 1. 所有站点统计信息 (`dbscan_cluster_stats_new.csv`)

**文件内容：**
- `cluster`: 站点聚类ID
- `center_x`: 聚类中心点经度
- `center_y`: 聚类中心点纬度
- `mean_total_count`: 平均借还总量
- `sum_total_count`: 总借还量
- `station_count`: 聚类包含的站点数量

**在各环节中的作用：**

#### 站点初始库存计算
- 提供站点的历史借还总量信息，作为初始库存计算的基础依据
- 用于计算站点的容量和需求规模

#### 站点类型划分
- **划分依据**：基于`sum_total_count`（总借还量）和`station_count`（站点数量）
- **划分原因**：
  - 不同规模的站点对共享单车的需求和调度策略不同
  - 大型站点需要更频繁的调度和更高的库存保障
  - 小型站点调度成本高，优先考虑需求满足而非频繁调度
- **划分方式**：通常将总借还量最高的前30个站点划分为主要站点，其余为一般站点

#### 候选边生成
- 提供所有站点的经纬度信息，用于计算站点间距离
- 基于距离筛选有效候选边（如距离≤3.5km）

#### 整数规划
- 提供站点的基本信息，作为整数规划模型的输入
- 用于确定需要优化的站点集合

### 2. 30个主要站点信息 (`dbscan_top30_clusters.csv`)

**文件内容：**
- `cluster`: 站点聚类ID
- `center_x`: 聚类中心点经度
- `center_y`: 聚类中心点纬度
- `sum_total_count`: 总借还量
- `station_count`: 聚类包含的站点数量

**在各环节中的作用：**

#### 站点初始库存计算
- 针对主要站点的借还总量，计算更高的初始库存保障
- 确保高需求站点有足够的车辆供应

#### 站点类型划分
- 作为大型站点的划分结果
- 用于制定差异化的调度策略

#### 候选边生成
- 主要站点与其他站点之间的边优先考虑
- 确保主要站点之间的连通性

#### 整数规划
- 作为整数规划模型的核心优化对象
- 重点优化主要站点的车辆调度，提高整体系统效率

### 3. 30个主要站点24小时借还统计 (`top30_count.csv`)

**文件内容：**
- `cluster_id`: 站点聚类ID
- `time_slot`: 时间槽（24小时，每小时一个时间槽）
- `rent_count`: 借车数量
- `return_count`: 还车数量

**在各环节中的作用：**

#### 站点初始库存计算
- 提供24小时借还变化趋势，用于计算不同时段的初始库存
- 考虑早晚高峰等特殊时段的需求波动

#### 站点类型划分
- 验证主要站点的划分合理性
- 基于24小时借还量的波动情况，进一步细分站点类型

#### 候选边生成
- 用于确定不同时段的调度需求
- 基于时段需求变化调整候选边的优先级

#### 整数规划
- 提供时间维度的需求信息
- 用于制定分时段的调度策略

### 4. 早高峰需求预测 (`station_demand_gap.csv`)

**文件内容：**
- `cluster_id`: 站点聚类ID
- `time_slot`: 时间槽
- `hour`: 小时
- `minute`: 分钟
- `predicted_rent_count`: 预测借车数量
- `predicted_return_count`: 预测还车数量
- `net_demand_gap`: 净需求缺口（预测借车数量 - 预测还车数量）

**在各环节中的作用：**

#### 站点初始库存计算
- 提供早高峰时段的净需求缺口，用于调整初始库存
- 确保早高峰期间站点有足够的车辆供应

#### 站点类型划分
- 基于早高峰的需求强度，进一步细分站点类型
- 识别早高峰期间的关键站点

#### 候选边生成
- 基于净需求缺口，确定需要调度的站点对
- 优先考虑净需求缺口大的站点之间的边

#### 整数规划
- **约束条件**：
  - `final_inv + unmet ≥ target_demand`：确保调度后库存加上未满足需求达到目标需求
  - `final_inv ≤ station_capacity`：确保调度后库存不超过站点容量
  - 基于净需求缺口制定供需平衡约束
- **整数规划体现**：
  - 将净需求缺口作为目标函数的一部分（最小化未满足需求）
  - 基于净需求缺口确定调度量的约束范围

### 5. 清洗后的原始骑行数据 (`processed_data.csv`)

**文件内容：**
- `orderid`: 订单ID
- `bikeid`: 车辆ID
- `userid`: 用户ID
- `start_time`: 开始时间
- `start_location_x`: 起点经度
- `start_location_y`: 起点纬度
- `end_time`: 结束时间
- `end_location_x`: 终点经度
- `end_location_y`: 终点纬度
- `track`: 骑行轨迹
- `start_hour`: 开始小时
- `end_hour`: 结束小时
- `ride_duration`: 骑行时长

**在各环节中的作用：**

#### 站点初始库存计算
- 提供历史骑行数据，用于计算站点的平均借还量
- 用于验证初始库存计算的合理性

#### 站点类型划分
- 基于历史借还量的分布，识别高需求站点
- 用于调整站点类型划分的阈值

#### 候选边生成
- 基于历史骑行轨迹，识别站点之间的热门路线
- 优先考虑历史借还频繁的站点之间的边

#### 整数规划
- 提供历史调度成本的参考数据
- 用于验证整数规划模型的优化结果

## 三、各环节数据流程关系

1. **数据加载**：从各数据文件加载基础数据
2. **站点类型划分**：基于所有站点统计信息划分站点类型
3. **初始库存计算**：结合历史借还统计和需求预测计算初始库存
4. **候选边生成**：基于站点位置、需求缺口和历史数据生成候选边
5. **整数规划**：构建调度优化模型，求解最优调度方案
6. **结果输出**：生成调度报告和可视化图表

以上数据文件共同构成了问题二共享单车调度优化模型的完整数据基础，为各个处理环节提供了必要的信息支持。